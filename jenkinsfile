pipeline {
    agent { label 'master'}

        stages {
            stage ('install') {
                steps {
                      sh "npm install"
                }
            }

            stage ('run') {
                steps {
                        sh "node index.js"
                }
            }

            stage ('test') {
                steps {
                        sh "npm test"
                }
            }
          
        }
        post {
            success {
                sh 'aws s3 cp index.html s3://sa-practica1-junio21  --grants read=uri=http://acs.amazonaws.com/groups/global/AllUsers'

            }
            failure {
                sh 'echo Pagina no actualizada, pruebas no superadas'
            }
        }
}
